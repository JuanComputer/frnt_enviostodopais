<div class="ubicanos-page">

  <!--  T√≠tulo -->
  <h2 class="title text-center">üìç Ub√≠canos</h2>
  <p class="subtitle text-center">Encuentra nuestras tiendas f√°cilmente</p>

  <!-- ============================
         FILTROS + BUSCADOR
  ============================ --> 
  <div class="filters-card">
    <div class="row align-items-end">

      <!-- Departamento -->
      <div class="col-md-3">
        <label class="form-label">Departamento</label>
        <select class="form-select"
                [(ngModel)]="selectedDepartamentoCode"
                (change)="onDepartamentoChange()">
          <option value="">Todos</option>
          <option *ngFor="let d of departamentos" [value]="d.codigo">
            {{ d.nombre }}
          </option>
        </select>
      </div>

      <!-- Provincia -->
      <div class="col-md-3">
        <label class="form-label">Provincia</label>
        <select class="form-select"
                [(ngModel)]="selectedProvinciaCode"
                (change)="onProvinciaChange()"
                [disabled]="!provincias.length">
          <option value="">Todos</option>
          <option *ngFor="let p of provincias" [value]="p.codigo">
            {{ p.nombre }}
          </option>
        </select>
      </div>

      <!-- Distrito -->
      <div class="col-md-3">
        <label class="form-label">Distrito</label>
        <select class="form-select"
                [(ngModel)]="selectedDistritoCode"
                (change)="onDistritoChange()"
                [disabled]="!distritos.length">
          <option value="">Todos</option>
          <option *ngFor="let dist of distritos" [value]="dist.codigo">
            {{ dist.nombre }}
          </option>
        </select>
      </div>

      <!-- Buscador -->
      <div class="col-md-3">
        <label class="form-label">Buscar tienda</label>
        <input type="text"
               class="form-control"
               [(ngModel)]="searchText"
               (input)="filterStores()"
               placeholder="Nombre o direcci√≥n...">
      </div>

    </div>
  </div>

  <!-- ============================
         GRID DE TARJETAS
  ============================ -->
  <div class="row store-grid">

    <div *ngFor="let store of pagedStores"
         class="col-md-4 d-flex">
      <div class="store-card w-100">

        <h5 class="store-name">
          <i class="bi bi-shop me-1"></i> {{ store.nombre }}
        </h5>

        <p>
          <i class="bi bi-geo-alt-fill text-accent"></i>
          {{ store.direccion }}
        </p>

        <small class="text-muted">
          {{ store.distrito?.nombre }},
          {{ store.distrito?.provincia?.nombre }},
          {{ store.distrito?.provincia?.departamento?.nombre }}
        </small>

        <hr>

        <p><i class="bi bi-clock me-1 text-accent"></i>
           <strong>Horario:</strong> 9:00 AM ‚Äì 7:00 PM</p>

        <p><i class="bi bi-telephone me-1 text-accent"></i>
           <strong>Tel√©fono:</strong> (01) 123-4567</p>

      </div>
    </div>

  </div>

  <!-- ============================
         PAGINACI√ìN
  ============================ -->
  <nav class="pagination-wrapper" *ngIf="totalPages > 1">
    <ul class="pagination justify-content-center">

      <li class="page-item"
          [class.disabled]="currentPage === 1">
        <button class="page-link" (click)="changePage(currentPage - 1)">Anterior</button>
      </li>

      <li class="page-item"
          *ngFor="let page of [].constructor(totalPages); let i = index"
          [class.active]="currentPage === i + 1">
        <button class="page-link" (click)="changePage(i + 1)">
          {{ i + 1 }}
        </button>
      </li>

      <li class="page-item"
          [class.disabled]="currentPage === totalPages">
        <button class="page-link" (click)="changePage(currentPage + 1)">Siguiente</button>
      </li>

    </ul>
  </nav>

</div>
